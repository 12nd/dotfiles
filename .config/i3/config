# i3 config file (v4)


# -------------- INITIAL SETUP -----------------
# i3-gaps gaps
for_window [class="^.*"] border pixel 2
gaps inner 20
gaps outer 10
smart_gaps on
smart_borders on

# Basic config
set $mod Mod4
set $alt Mod1
floating_modifier $mod
# Use Mouse+$mod to drag floating windows to their wanted position
font pango:mono 12

# Don't wrap around when changing focus
focus_wrapping no

for_window [instance="keepassxc"] floating enable
for_window [instance="keepassxc"] sticky enable
for_window [instance="gnome-calculator"] floating enable

for_window [instance="floater"] floating enable
for_window [instance="floater"] resize set 1200 650
for_window [instance="floater"] move position center

for_window [instance="quickterm"] floating enable
for_window [instance="quickterm"] resize set 850 550
for_window [instance="quickterm"] move position center
for_window [instance="quickterm"] move scratchpad

for_window [workspace=".*-f$"] floating enable

# multi monitors
set $display1 "DisplayPort-0"
set $display2 "DisplayPort-1"

# Start bar
bar {
    font pango:mono 12
    position top
    status_command i3status-rs $HOME/.config/i3status-rust/config.toml
    strip_workspace_numbers yes
	tray_output $display1
    colors {
        separator #666666
        background #000000
        statusline #dddddd
        #                   BORDER BACKGROUND TEXT
        focused_workspace $alt_color $alt_color $color0
        active_workspace $color0 $color0 $focused_color
        inactive_workspace $color0 $color0 $color1
        urgent_workspace $alertred $red $white
    }
}

# Startup
exec_always --no-startup-id autorandr --change --skip-options gamma && reloaddisplay
exec --no-startup-id picom -b
exec --no-startup-id setwp
exec_always --no-startup-id remapkb
exec --no-startup-id /usr/libexec/polkit-gnome-authentication-agent-1

exec --no-startup-id seafile-applet
exec --no-startup-id redshift-gtk -l -37.8136:144.9631 -t 6500K:2700K
exec --no-startup-id ibus-daemon -drxR
exec --no-startup-id kdeconnect-indicator
exec --no-startup-id unclutter


# ------------ COLORS ----------------
# set Xresources colors:
set_from_resource $normal_color color8 #333333
set_from_resource $focused_color color15 #ffffff
set_from_resource $alt_color color2 #0088cc
set_from_resource $color0 color0 #000000
set_from_resource $color1 color1 #888888
set $transparent #00000000
set $alertred #900000
set $red #ff0000
set $black #000000
set $white #ffffff

# COLORCLASS            BORDER          BACKGROUND      TEXT    INDICATOR   CHILD_BORDER
client.focused          $focused_color  $focused_color  $color0  $alt_color  $focused_color
client.unfocused        $normal_color   $normal_color   $color0  $alt_color  $normal_color
client.focused_inactive $normal_color   $normal_color   $color0  $alt_color  $normal_color
client.urgent           $alertred       $red            $color0  $alt_color  $alertred

client.background       $color0

# --------------- i3 BINDINGS --------------
# i3 Focus/Window mgmt
# focus stuff
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+s split toggle
# split in horizontal orientation
bindsym $mod+semicolon split h
# split in vertical orientation
bindsym $mod+apostrophe split v

bindsym $mod+t layout splith
bindsym $mod+$alt+t layout splitv
bindsym $mod+Shift+t layout tabbed
bindsym $mod+Ctrl+t layout stacking
# focus parent
bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child

bindsym $mod+Shift+q kill
bindsym $mod+f fullscreen toggle

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle
# change focus between tiling / floating windows
bindsym $mod+Ctrl+space focus mode_toggle
# Center a flaoting window
bindsym $mod+Shift+c move position center

# make the currently focused window a scratchpad
bindsym $mod+Shift+minus move scratchpad
# show the first scratchpad window
bindsym $mod+minus scratchpad show

# Workspace stuffs

# multi monitors
# https://www.reddit.com/r/i3wm/comments/5zwbg0/comment/df54fka/

bindsym $mod+F1 focus output $display1
bindsym $mod+F2 focus output $display2

set $ws01 "01:一"
set $ws02 "02:二"
set $ws03 "03:三"
set $ws04 "04:四"
set $ws05 "05:五"
set $ws06 "06:六"
set $ws07 "07:七"
set $ws08 "08:八"
set $ws09 "09:九"
set $ws10 "10:十"

workspace 101:一 output $display1
workspace 1$ws02 output $display1
workspace 1$ws03 output $display1
workspace 1$ws04 output $display1
workspace 1$ws05 output $display1
workspace 1$ws06 output $display1
workspace 1$ws07 output $display1
workspace 1$ws08 output $display1
workspace 1$ws09 output $display1
workspace 1$ws10 output $display1

workspace 201:一 output $display2
workspace 2$ws02 output $display2
workspace 2$ws03 output $display2
workspace 2$ws04 output $display2
workspace 2$ws05 output $display2
workspace 2$ws06 output $display2
workspace 2$ws07 output $display2
workspace 2$ws08 output $display2
workspace 2$ws09 output $display2
workspace 2$ws10 output $display2

# switch to workspace

bindsym $mod+1 exec --no-startup-id i3monitorws goto $ws01
bindsym $mod+2 exec --no-startup-id i3monitorws goto $ws02
bindsym $mod+3 exec --no-startup-id i3monitorws goto $ws03
bindsym $mod+4 exec --no-startup-id i3monitorws goto $ws04
bindsym $mod+5 exec --no-startup-id i3monitorws goto $ws05
bindsym $mod+6 exec --no-startup-id i3monitorws goto $ws06
bindsym $mod+7 exec --no-startup-id i3monitorws goto $ws07
bindsym $mod+8 exec --no-startup-id i3monitorws goto $ws08
bindsym $mod+9 exec --no-startup-id i3monitorws goto $ws09
bindsym $mod+0 exec --no-startup-id i3monitorws goto $ws10

# move focused container to workspace

bindsym $mod+Shift+1 exec --no-startup-id i3monitorws move $ws01
bindsym $mod+Shift+2 exec --no-startup-id i3monitorws move $ws02
bindsym $mod+Shift+3 exec --no-startup-id i3monitorws move $ws03
bindsym $mod+Shift+4 exec --no-startup-id i3monitorws move $ws04
bindsym $mod+Shift+5 exec --no-startup-id i3monitorws move $ws05
bindsym $mod+Shift+6 exec --no-startup-id i3monitorws move $ws06
bindsym $mod+Shift+7 exec --no-startup-id i3monitorws move $ws07
bindsym $mod+Shift+8 exec --no-startup-id i3monitorws move $ws08
bindsym $mod+Shift+9 exec --no-startup-id i3monitorws move $ws09
bindsym $mod+Shift+0 exec --no-startup-id i3monitorws move $ws10


# alt tab
bindsym $alt+Tab workspace back_and_forth

# reload the configuration file
bindsym $mod+Shift+F10 reload
bindsym $mod+Control+F10 restart

# Resize window setup
bindsym $mod+$alt+h	exec --no-startup-id i3resize left
bindsym $mod+$alt+j	exec --no-startup-id i3resize down
bindsym $mod+$alt+k	exec --no-startup-id i3resize up
bindsym $mod+$alt+l	exec --no-startup-id i3resize right

# gaps - https://www.reddit.com/r/i3wm/comments/3xcvy0/help_with_code_to_toggle_i3_gaps/cy3izw0/
set $mode_gaps Toggle gaps: (1) on (2) off (3) plus outer (4) minus outer (5) plus inner (6) minus inner
bindsym $mod+Shift+z mode "$mode_gaps"
mode "$mode_gaps" {
    bindsym 1 mode "default", gaps inner all set 5, gaps outer all set 5
    bindsym 2 mode "default", gaps inner all set 0, gaps outer all set 0
    bindsym 3 mode "default", gaps outer current plus 5
    bindsym 4 mode "default", gaps outer current minus 5
    bindsym 5 mode "default", gaps inner current plus 5
    bindsym 6 mode "default", gaps inner current minus 5
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Master+stack thingy
# https://www.reddit.com/r/i3wm/comments/bgwz85/quickly_make_main_stack_and_side_windows_layout/ 
bindsym $mod+Shift+o layout splitv; move left; resize grow right 10 px or 10 ppt; split v; layout stacking

# Reset workspace
# https://www.reddit.com/r/i3wm/comments/8c6yfy/how_to_reset_a_workspace_move_all_nodes_to_root/
bindsym $mod+o [tiling workspace="__focused__"] move workspace "reorder"; [workspace="reorder"] move workspace current

# --------------- APP & SYSTEM BINDINGS --------------

# programs
bindsym $mod+Return exec --no-startup-id $TERMINAL
bindsym $mod+Shift+Return exec --no-startup-id termdir
bindsym $mod+Control+Return exec --no-startup-id termfloat
bindsym $mod+space exec --no-startup-id dmenu_run
bindsym $mod+$alt+space exec --no-startup-id i3-dmenu-desktop

bindsym $mod+e exec --no-startup-id $TERMINAL -e $SHELL -i -c $FILE
bindsym $mod+Control+e exec thunar
bindsym $mod+w exec $BROWSER

bindsym $mod+p exec keepassxc
bindsym $mod+Shift+p exec --no-startup-id termfloat btm
bindsym $mod+Control+p exec --no-startup-id termfloat sudo powertop
bindsym $mod+$alt+p exec --no-startup-id termfloat htop
bindsym $mod+Shift+n exec net.cozic.joplin_desktop
bindsym $mod+m exec evolution
bindsym $mod+c exec caprine
bindsym $mod+Control+c exec gnome-calculator
bindsym $mod+Control+o exec obs
bindsym $mod+d exec discord
# compositor transparency on any program
bindsym $mod+y exec --no-startup-id transset-df -m 0.87 -a

# bindsym $mod+F2 exec --no-startup-id jumptool config
# bindsym $mod+Shift+F2 exec --no-startup-id jumptool dir
# bindsym $mod+F3 exec --no-startup-id launchpersonal

# System hotkeys
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 5
bindsym Shift+XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 10
bindsym XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 5
bindsym Shift+XF86MonBrightnessUp exec --no-startup-id xbacklight -inc 10

bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym Shift+XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -1%
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym Shift+XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +1%
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

bindsym XF86Display exec --no-startup-id displayselect

# Script menus
bindsym $mod+Shift+e exec --no-startup-id sdmenu
bindsym $mod+Shift+m exec --no-startup-id mountmenu
bindsym $mod+Control+m exec --no-startup-id umountmenu
bindsym $mod+Shift+d exec --no-startup-id displayselect
bindsym $mod+Shift+x exec --no-startup-id selectaudiosink

bindsym Print exec --no-startup-id screenshot screen
bindsym Shift+Print exec --no-startup-id screenshot rect
bindsym Control+Print exec --no-startup-id screenshot window
bindsym $alt+Print exec --no-startup-id screenshot
bindsym $mod+Shift+s exec --no-startup-id screenshot rect
